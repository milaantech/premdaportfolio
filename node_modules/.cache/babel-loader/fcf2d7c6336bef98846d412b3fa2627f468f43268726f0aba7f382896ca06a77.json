{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import ReactDOM from'react-dom';import{useNavigate}from'react-router-dom';import{motion}from'framer-motion';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function currency(n){return\"\\u20B9\".concat(Number(n).toLocaleString('en-IN'));}export default function BookCard(_ref){var _book$images;let{book}=_ref;const navigate=useNavigate();const coverImage=((_book$images=book.images)===null||_book$images===void 0?void 0:_book$images[0])||'https://placehold.co/800x1200?text=Cover';function PlatformDropdown(_ref2){let{book}=_ref2;const[open,setOpen]=useState(false);const btnRef=useRef(null);const dropdownRef=useRef(null);const[pos,setPos]=useState({top:0,left:0,width:220});const hasAny=book.amazonLink||book.flipkartLink||book.milaanLink;useEffect(()=>{if(!open)return;function onDoc(e){if(btnRef.current&&btnRef.current.contains(e.target))return;if(dropdownRef.current&&dropdownRef.current.contains(e.target))return;setOpen(false);}window.addEventListener('mousedown',onDoc);window.addEventListener('scroll',onDoc,true);return()=>{window.removeEventListener('mousedown',onDoc);window.removeEventListener('scroll',onDoc,true);};},[open]);function toggle(){if(!btnRef.current)return setOpen(o=>!o);const rect=btnRef.current.getBoundingClientRect();const dropdownWidth=220;let left=rect.right-dropdownWidth;if(left<8)left=8;const top=rect.bottom+window.scrollY+6;setPos({top,left,width:dropdownWidth});setOpen(o=>!o);}if(!hasAny)return null;const menu=open?/*#__PURE__*/_jsx(\"div\",{ref:dropdownRef,style:{position:'absolute',top:pos.top+'px',left:pos.left+'px',width:pos.width+'px'},className:\"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded shadow z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[book.amazonLink&&/*#__PURE__*/_jsx(\"a\",{href:book.amazonLink,target:\"_blank\",rel:\"noreferrer\",className:\"px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-900\",children:\"Amazon\"}),book.flipkartLink&&/*#__PURE__*/_jsx(\"a\",{href:book.flipkartLink,target:\"_blank\",rel:\"noreferrer\",className:\"px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-900\",children:\"Flipkart\"}),book.milaanLink&&/*#__PURE__*/_jsx(\"a\",{href:book.milaanLink,target:\"_blank\",rel:\"noreferrer\",className:\"px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-900\",children:\"Milaan\"})]})}):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{ref:btnRef,onClick:toggle,className:\"px-3 py-2 bg-amber-500 text-white rounded-lg text-sm\",children:\"Buy \\u25BE\"}),/*#__PURE__*/ReactDOM.createPortal(menu,document.body)]});}return/*#__PURE__*/_jsxs(motion.article,{layout:true,whileHover:{y:-6,boxShadow:\"0 10px 15px -3px rgba(245, 158, 11, 0.1), 0 4px 6px -2px rgba(245, 158, 11, 0.05)\"},className:\"group relative bg-white dark:bg-slate-800 rounded-2xl overflow-hidden flex flex-col transition duration-300 ease-in-out h-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pointer-events-none absolute -inset-1 transform-gpu scale-95 filter blur-2xl opacity-0 group-hover:opacity-70 dark:group-hover:opacity-30 group-hover:scale-100 rounded-2xl bg-gradient-to-br from-amber-200 via-amber-400 to-rose-300 transition-all duration-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10 flex-1 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:coverImage,alt:book.title,className:\"w-full h-56 sm:h-64 md:h-72 lg:h-80 object-cover\",onError:e=>{e.target.onerror=null;e.target.src='https://placehold.co/800x1200?text=Cover';}}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute left-3 bottom-3 bg-amber-500/90 dark:bg-amber-600/90 text-white rounded-full px-3 py-0.5 text-xs font-semibold shadow-md\",children:book.genre})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 sm:p-5 flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-serif text-lg sm:text-xl\",children:book.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600 dark:text-slate-300 mt-1 flex-1\",children:book.subtitle}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 sm:mt-4 flex items-center justify-between pt-3 border-t border-dashed border-slate-200 dark:border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-amber-600 dark:text-amber-500\",children:currency(book.price)}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-slate-500\",children:[book.pages,\" pages\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 relative\",children:[/*#__PURE__*/_jsx(PlatformDropdown,{book:book}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/book/\".concat(book.id)),className:\"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-medium text-sm hover:bg-slate-200 dark:hover:bg-slate-600 transition\",children:\"View Details\"})]})]})]})]})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","ReactDOM","useNavigate","motion","jsx","_jsx","jsxs","_jsxs","currency","n","concat","Number","toLocaleString","BookCard","_ref","_book$images","book","navigate","coverImage","images","PlatformDropdown","_ref2","open","setOpen","btnRef","dropdownRef","pos","setPos","top","left","width","hasAny","amazonLink","flipkartLink","milaanLink","onDoc","e","current","contains","target","window","addEventListener","removeEventListener","toggle","o","rect","getBoundingClientRect","dropdownWidth","right","bottom","scrollY","menu","ref","style","position","className","children","href","rel","onClick","createPortal","document","body","article","layout","whileHover","y","boxShadow","src","alt","title","onError","onerror","genre","subtitle","price","pages","id"],"sources":["/Users/viveksingh/Desktop/book-frontend/src/components/BookCard.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useNavigate } from 'react-router-dom';\nimport { motion } from 'framer-motion';\n\nfunction currency(n){ return `₹${Number(n).toLocaleString('en-IN')}` }\n\nexport default function BookCard({ book }){\n  const navigate = useNavigate();\n  const coverImage = book.images?.[0] || 'https://placehold.co/800x1200?text=Cover';\n\n  function PlatformDropdown({ book }){\n    const [open, setOpen] = useState(false);\n    const btnRef = useRef(null);\n    const dropdownRef = useRef(null);\n    const [pos, setPos] = useState({ top: 0, left: 0, width: 220 });\n    const hasAny = book.amazonLink || book.flipkartLink || book.milaanLink;\n    useEffect(()=>{\n      if(!open) return;\n      function onDoc(e){\n        if(btnRef.current && btnRef.current.contains(e.target)) return;\n        if(dropdownRef.current && dropdownRef.current.contains(e.target)) return;\n        setOpen(false);\n      }\n      window.addEventListener('mousedown', onDoc);\n      window.addEventListener('scroll', onDoc, true);\n      return ()=>{ window.removeEventListener('mousedown', onDoc); window.removeEventListener('scroll', onDoc, true); };\n    }, [open]);\n\n    function toggle(){\n      if(!btnRef.current) return setOpen(o=>!o);\n      const rect = btnRef.current.getBoundingClientRect();\n      const dropdownWidth = 220;\n      let left = rect.right - dropdownWidth;\n      if(left < 8) left = 8;\n      const top = rect.bottom + window.scrollY + 6;\n      setPos({ top, left, width: dropdownWidth });\n      setOpen(o=>!o);\n    }\n\n    if(!hasAny) return null;\n\n    const menu = open ? (\n      <div ref={dropdownRef} style={{ position: 'absolute', top: pos.top + 'px', left: pos.left + 'px', width: pos.width + 'px' }} className=\"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded shadow z-50\">\n        <div className=\"flex flex-col\">\n          {book.amazonLink && <a href={book.amazonLink} target=\"_blank\" rel=\"noreferrer\" className=\"px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-900\">Amazon</a>}\n          {book.flipkartLink && <a href={book.flipkartLink} target=\"_blank\" rel=\"noreferrer\" className=\"px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-900\">Flipkart</a>}\n          {book.milaanLink && <a href={book.milaanLink} target=\"_blank\" rel=\"noreferrer\" className=\"px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-900\">Milaan</a>}\n        </div>\n      </div>\n    ) : null;\n\n    return (\n      <div className=\"relative\">\n        <button ref={btnRef} onClick={toggle} className=\"px-3 py-2 bg-amber-500 text-white rounded-lg text-sm\">Buy ▾</button>\n        {ReactDOM.createPortal(menu, document.body)}\n      </div>\n    );\n  }\n\n  return (\n    <motion.article\n      layout\n      whileHover={{ y: -6, boxShadow: \"0 10px 15px -3px rgba(245, 158, 11, 0.1), 0 4px 6px -2px rgba(245, 158, 11, 0.05)\" }}\n      className=\"group relative bg-white dark:bg-slate-800 rounded-2xl overflow-hidden flex flex-col transition duration-300 ease-in-out h-full\"\n    >\n      {/* Glowing gradient background */}\n      <div className=\"pointer-events-none absolute -inset-1 transform-gpu scale-95 filter blur-2xl opacity-0 group-hover:opacity-70 dark:group-hover:opacity-30 group-hover:scale-100 rounded-2xl bg-gradient-to-br from-amber-200 via-amber-400 to-rose-300 transition-all duration-300\" />\n\n      {/* Card content above the glow */}\n      <div className=\"relative z-10 flex-1 flex flex-col\">\n        <div className=\"relative\">\n          <img src={coverImage} alt={book.title} className=\"w-full h-56 sm:h-64 md:h-72 lg:h-80 object-cover\" onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/800x1200?text=Cover' }} />\n          <div className=\"absolute left-3 bottom-3 bg-amber-500/90 dark:bg-amber-600/90 text-white rounded-full px-3 py-0.5 text-xs font-semibold shadow-md\">\n            {book.genre}\n          </div>\n        </div>\n        <div className=\"p-4 sm:p-5 flex-1 flex flex-col\">\n          <h4 className=\"font-serif text-lg sm:text-xl\">{book.title}</h4>\n          <p className=\"text-sm text-slate-600 dark:text-slate-300 mt-1 flex-1\">{book.subtitle}</p>\n\n            <div className=\"mt-3 sm:mt-4 flex items-center justify-between pt-3 border-t border-dashed border-slate-200 dark:border-slate-700\">\n              <div>\n                <div className=\"text-xl font-bold text-amber-600 dark:text-amber-500\">{currency(book.price)}</div>\n                <div className=\"text-xs text-slate-500\">{book.pages} pages</div>\n              </div>\n              <div className=\"flex items-center gap-2 relative\">\n                {/* Compact dropdown for platform links */}\n                <PlatformDropdown book={book} />\n                <button onClick={() => navigate(`/book/${book.id}`)} className=\"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-medium text-sm hover:bg-slate-200 dark:hover:bg-slate-600 transition\">View Details</button>\n              </div>\n            </div>\n\n            \n        </div>\n      </div>\n    </motion.article>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAC1D,MAAO,CAAAC,QAAQ,KAAM,WAAW,CAChC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,MAAM,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,QAAS,CAAAC,QAAQA,CAACC,CAAC,CAAC,CAAE,eAAAC,MAAA,CAAWC,MAAM,CAACF,CAAC,CAAC,CAACG,cAAc,CAAC,OAAO,CAAC,EAAG,CAErE,cAAe,SAAS,CAAAC,QAAQA,CAAAC,IAAA,CAAU,KAAAC,YAAA,IAAT,CAAEC,IAAK,CAAC,CAAAF,IAAA,CACvC,KAAM,CAAAG,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAgB,UAAU,CAAG,EAAAH,YAAA,CAAAC,IAAI,CAACG,MAAM,UAAAJ,YAAA,iBAAXA,YAAA,CAAc,CAAC,CAAC,GAAI,0CAA0C,CAEjF,QAAS,CAAAK,gBAAgBA,CAAAC,KAAA,CAAU,IAAT,CAAEL,IAAK,CAAC,CAAAK,KAAA,CAChC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CACvC,KAAM,CAAA0B,MAAM,CAAGzB,MAAM,CAAC,IAAI,CAAC,CAC3B,KAAM,CAAA0B,WAAW,CAAG1B,MAAM,CAAC,IAAI,CAAC,CAChC,KAAM,CAAC2B,GAAG,CAAEC,MAAM,CAAC,CAAG7B,QAAQ,CAAC,CAAE8B,GAAG,CAAE,CAAC,CAAEC,IAAI,CAAE,CAAC,CAAEC,KAAK,CAAE,GAAI,CAAC,CAAC,CAC/D,KAAM,CAAAC,MAAM,CAAGf,IAAI,CAACgB,UAAU,EAAIhB,IAAI,CAACiB,YAAY,EAAIjB,IAAI,CAACkB,UAAU,CACtElC,SAAS,CAAC,IAAI,CACZ,GAAG,CAACsB,IAAI,CAAE,OACV,QAAS,CAAAa,KAAKA,CAACC,CAAC,CAAC,CACf,GAAGZ,MAAM,CAACa,OAAO,EAAIb,MAAM,CAACa,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,MAAM,CAAC,CAAE,OACxD,GAAGd,WAAW,CAACY,OAAO,EAAIZ,WAAW,CAACY,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,MAAM,CAAC,CAAE,OAClEhB,OAAO,CAAC,KAAK,CAAC,CAChB,CACAiB,MAAM,CAACC,gBAAgB,CAAC,WAAW,CAAEN,KAAK,CAAC,CAC3CK,MAAM,CAACC,gBAAgB,CAAC,QAAQ,CAAEN,KAAK,CAAE,IAAI,CAAC,CAC9C,MAAO,IAAI,CAAEK,MAAM,CAACE,mBAAmB,CAAC,WAAW,CAAEP,KAAK,CAAC,CAAEK,MAAM,CAACE,mBAAmB,CAAC,QAAQ,CAAEP,KAAK,CAAE,IAAI,CAAC,CAAE,CAAC,CACnH,CAAC,CAAE,CAACb,IAAI,CAAC,CAAC,CAEV,QAAS,CAAAqB,MAAMA,CAAA,CAAE,CACf,GAAG,CAACnB,MAAM,CAACa,OAAO,CAAE,MAAO,CAAAd,OAAO,CAACqB,CAAC,EAAE,CAACA,CAAC,CAAC,CACzC,KAAM,CAAAC,IAAI,CAAGrB,MAAM,CAACa,OAAO,CAACS,qBAAqB,CAAC,CAAC,CACnD,KAAM,CAAAC,aAAa,CAAG,GAAG,CACzB,GAAI,CAAAlB,IAAI,CAAGgB,IAAI,CAACG,KAAK,CAAGD,aAAa,CACrC,GAAGlB,IAAI,CAAG,CAAC,CAAEA,IAAI,CAAG,CAAC,CACrB,KAAM,CAAAD,GAAG,CAAGiB,IAAI,CAACI,MAAM,CAAGT,MAAM,CAACU,OAAO,CAAG,CAAC,CAC5CvB,MAAM,CAAC,CAAEC,GAAG,CAAEC,IAAI,CAAEC,KAAK,CAAEiB,aAAc,CAAC,CAAC,CAC3CxB,OAAO,CAACqB,CAAC,EAAE,CAACA,CAAC,CAAC,CAChB,CAEA,GAAG,CAACb,MAAM,CAAE,MAAO,KAAI,CAEvB,KAAM,CAAAoB,IAAI,CAAG7B,IAAI,cACfjB,IAAA,QAAK+C,GAAG,CAAE3B,WAAY,CAAC4B,KAAK,CAAE,CAAEC,QAAQ,CAAE,UAAU,CAAE1B,GAAG,CAAEF,GAAG,CAACE,GAAG,CAAG,IAAI,CAAEC,IAAI,CAAEH,GAAG,CAACG,IAAI,CAAG,IAAI,CAAEC,KAAK,CAAEJ,GAAG,CAACI,KAAK,CAAG,IAAK,CAAE,CAACyB,SAAS,CAAC,8FAA8F,CAAAC,QAAA,cACnOjD,KAAA,QAAKgD,SAAS,CAAC,eAAe,CAAAC,QAAA,EAC3BxC,IAAI,CAACgB,UAAU,eAAI3B,IAAA,MAAGoD,IAAI,CAAEzC,IAAI,CAACgB,UAAW,CAACO,MAAM,CAAC,QAAQ,CAACmB,GAAG,CAAC,YAAY,CAACH,SAAS,CAAC,8DAA8D,CAAAC,QAAA,CAAC,QAAM,CAAG,CAAC,CACjKxC,IAAI,CAACiB,YAAY,eAAI5B,IAAA,MAAGoD,IAAI,CAAEzC,IAAI,CAACiB,YAAa,CAACM,MAAM,CAAC,QAAQ,CAACmB,GAAG,CAAC,YAAY,CAACH,SAAS,CAAC,8DAA8D,CAAAC,QAAA,CAAC,UAAQ,CAAG,CAAC,CACvKxC,IAAI,CAACkB,UAAU,eAAI7B,IAAA,MAAGoD,IAAI,CAAEzC,IAAI,CAACkB,UAAW,CAACK,MAAM,CAAC,QAAQ,CAACmB,GAAG,CAAC,YAAY,CAACH,SAAS,CAAC,8DAA8D,CAAAC,QAAA,CAAC,QAAM,CAAG,CAAC,EAC/J,CAAC,CACH,CAAC,CACJ,IAAI,CAER,mBACEjD,KAAA,QAAKgD,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBnD,IAAA,WAAQ+C,GAAG,CAAE5B,MAAO,CAACmC,OAAO,CAAEhB,MAAO,CAACY,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAAC,YAAK,CAAQ,CAAC,cACpHvD,QAAQ,CAAC2D,YAAY,CAACT,IAAI,CAAEU,QAAQ,CAACC,IAAI,CAAC,EACxC,CAAC,CAEV,CAEA,mBACEvD,KAAA,CAACJ,MAAM,CAAC4D,OAAO,EACbC,MAAM,MACNC,UAAU,CAAE,CAAEC,CAAC,CAAE,CAAC,CAAC,CAAEC,SAAS,CAAE,mFAAoF,CAAE,CACtHZ,SAAS,CAAC,gIAAgI,CAAAC,QAAA,eAG1InD,IAAA,QAAKkD,SAAS,CAAC,oQAAoQ,CAAE,CAAC,cAGtRhD,KAAA,QAAKgD,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eACjDjD,KAAA,QAAKgD,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBnD,IAAA,QAAK+D,GAAG,CAAElD,UAAW,CAACmD,GAAG,CAAErD,IAAI,CAACsD,KAAM,CAACf,SAAS,CAAC,kDAAkD,CAACgB,OAAO,CAAGnC,CAAC,EAAK,CAAEA,CAAC,CAACG,MAAM,CAACiC,OAAO,CAAG,IAAI,CAAEpC,CAAC,CAACG,MAAM,CAAC6B,GAAG,CAAG,0CAA0C,CAAC,CAAE,CAAE,CAAC,cAC9M/D,IAAA,QAAKkD,SAAS,CAAC,mIAAmI,CAAAC,QAAA,CAC/IxC,IAAI,CAACyD,KAAK,CACR,CAAC,EACH,CAAC,cACNlE,KAAA,QAAKgD,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CnD,IAAA,OAAIkD,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAExC,IAAI,CAACsD,KAAK,CAAK,CAAC,cAC/DjE,IAAA,MAAGkD,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAExC,IAAI,CAAC0D,QAAQ,CAAI,CAAC,cAEvFnE,KAAA,QAAKgD,SAAS,CAAC,mHAAmH,CAAAC,QAAA,eAChIjD,KAAA,QAAAiD,QAAA,eACEnD,IAAA,QAAKkD,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAAEhD,QAAQ,CAACQ,IAAI,CAAC2D,KAAK,CAAC,CAAM,CAAC,cAClGpE,KAAA,QAAKgD,SAAS,CAAC,wBAAwB,CAAAC,QAAA,EAAExC,IAAI,CAAC4D,KAAK,CAAC,QAAM,EAAK,CAAC,EAC7D,CAAC,cACNrE,KAAA,QAAKgD,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAE/CnD,IAAA,CAACe,gBAAgB,EAACJ,IAAI,CAAEA,IAAK,CAAE,CAAC,cAChCX,IAAA,WAAQsD,OAAO,CAAEA,CAAA,GAAM1C,QAAQ,UAAAP,MAAA,CAAUM,IAAI,CAAC6D,EAAE,CAAE,CAAE,CAACtB,SAAS,CAAC,+HAA+H,CAAAC,QAAA,CAAC,cAAY,CAAQ,CAAC,EACjN,CAAC,EACH,CAAC,EAGL,CAAC,EACH,CAAC,EACQ,CAAC,CAErB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}