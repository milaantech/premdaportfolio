{"ast":null,"code":"// Lightweight API helper for the frontend to talk to the local Express API.\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:4000';\nasync function request(path, opts = {}) {\n  // include Authorization Bearer token from localStorage when present\n  const headers = {\n    'Content-Type': 'application/json',\n    ...(opts.headers || {})\n  };\n  try {\n    const token = localStorage.getItem('pt_admin_token');\n    if (token) headers['Authorization'] = `Bearer ${token}`;\n  } catch (e) {}\n  const res = await fetch(`${API_BASE}${path}`, {\n    headers,\n    ...opts\n  });\n  if (!res.ok) {\n    const text = await res.text().catch(() => null);\n    throw new Error(text || res.statusText || 'API error');\n  }\n  // Try to parse JSON, otherwise return null\n  const ct = res.headers.get('content-type') || '';\n  if (ct.includes('application/json')) return res.json();\n  return null;\n}\nexport async function fetchBooks() {\n  return request('/api/books');\n}\nexport async function fetchAuthor() {\n  return request('/api/author');\n}\nexport async function saveAuthor(data) {\n  return request('/api/author', {\n    method: 'POST',\n    body: JSON.stringify(data)\n  });\n}\nexport async function toggleFeatured(bookId) {\n  return request(`/api/books/${bookId}/toggle-featured`, {\n    method: 'POST'\n  });\n}\nexport async function adminLogin(id, password) {\n  return request('/api/admin/login', {\n    method: 'POST',\n    body: JSON.stringify({\n      id,\n      password\n    })\n  });\n}\nexport default {\n  fetchBooks,\n  fetchAuthor,\n  saveAuthor,\n  toggleFeatured\n};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","request","path","opts","headers","token","localStorage","getItem","e","res","fetch","ok","text","catch","Error","statusText","ct","get","includes","json","fetchBooks","fetchAuthor","saveAuthor","data","method","body","JSON","stringify","toggleFeatured","bookId","adminLogin","id","password"],"sources":["/Users/viveksingh/Desktop/book-frontend/src/lib/api.js"],"sourcesContent":["// Lightweight API helper for the frontend to talk to the local Express API.\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n\nasync function request(path, opts = {}){\n  // include Authorization Bearer token from localStorage when present\n  const headers = { 'Content-Type': 'application/json', ...(opts.headers || {}) };\n  try{\n    const token = localStorage.getItem('pt_admin_token');\n    if(token) headers['Authorization'] = `Bearer ${token}`;\n  }catch(e){}\n\n  const res = await fetch(`${API_BASE}${path}`, {\n    headers,\n    ...opts\n  });\n  if(!res.ok){\n    const text = await res.text().catch(()=>null);\n    throw new Error(text || res.statusText || 'API error');\n  }\n  // Try to parse JSON, otherwise return null\n  const ct = res.headers.get('content-type') || '';\n  if(ct.includes('application/json')) return res.json();\n  return null;\n}\n\nexport async function fetchBooks(){ return request('/api/books'); }\nexport async function fetchAuthor(){ return request('/api/author'); }\nexport async function saveAuthor(data){ return request('/api/author', { method: 'POST', body: JSON.stringify(data) }); }\nexport async function toggleFeatured(bookId){ return request(`/api/books/${bookId}/toggle-featured`, { method: 'POST' }); }\nexport async function adminLogin(id, password){\n  return request('/api/admin/login', { method: 'POST', body: JSON.stringify({ id, password }) });\n}\n\nexport default { fetchBooks, fetchAuthor, saveAuthor, toggleFeatured };\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAEzE,eAAeC,OAAOA,CAACC,IAAI,EAAEC,IAAI,GAAG,CAAC,CAAC,EAAC;EACrC;EACA,MAAMC,OAAO,GAAG;IAAE,cAAc,EAAE,kBAAkB;IAAE,IAAID,IAAI,CAACC,OAAO,IAAI,CAAC,CAAC;EAAE,CAAC;EAC/E,IAAG;IACD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC;IACpD,IAAGF,KAAK,EAAED,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUC,KAAK,EAAE;EACxD,CAAC,QAAMG,CAAC,EAAC,CAAC;EAEV,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGb,QAAQ,GAAGK,IAAI,EAAE,EAAE;IAC5CE,OAAO;IACP,GAAGD;EACL,CAAC,CAAC;EACF,IAAG,CAACM,GAAG,CAACE,EAAE,EAAC;IACT,MAAMC,IAAI,GAAG,MAAMH,GAAG,CAACG,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAI,IAAI,CAAC;IAC7C,MAAM,IAAIC,KAAK,CAACF,IAAI,IAAIH,GAAG,CAACM,UAAU,IAAI,WAAW,CAAC;EACxD;EACA;EACA,MAAMC,EAAE,GAAGP,GAAG,CAACL,OAAO,CAACa,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE;EAChD,IAAGD,EAAE,CAACE,QAAQ,CAAC,kBAAkB,CAAC,EAAE,OAAOT,GAAG,CAACU,IAAI,CAAC,CAAC;EACrD,OAAO,IAAI;AACb;AAEA,OAAO,eAAeC,UAAUA,CAAA,EAAE;EAAE,OAAOnB,OAAO,CAAC,YAAY,CAAC;AAAE;AAClE,OAAO,eAAeoB,WAAWA,CAAA,EAAE;EAAE,OAAOpB,OAAO,CAAC,aAAa,CAAC;AAAE;AACpE,OAAO,eAAeqB,UAAUA,CAACC,IAAI,EAAC;EAAE,OAAOtB,OAAO,CAAC,aAAa,EAAE;IAAEuB,MAAM,EAAE,MAAM;IAAEC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI;EAAE,CAAC,CAAC;AAAE;AACvH,OAAO,eAAeK,cAAcA,CAACC,MAAM,EAAC;EAAE,OAAO5B,OAAO,CAAC,cAAc4B,MAAM,kBAAkB,EAAE;IAAEL,MAAM,EAAE;EAAO,CAAC,CAAC;AAAE;AAC1H,OAAO,eAAeM,UAAUA,CAACC,EAAE,EAAEC,QAAQ,EAAC;EAC5C,OAAO/B,OAAO,CAAC,kBAAkB,EAAE;IAAEuB,MAAM,EAAE,MAAM;IAAEC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEI,EAAE;MAAEC;IAAS,CAAC;EAAE,CAAC,CAAC;AAChG;AAEA,eAAe;EAAEZ,UAAU;EAAEC,WAAW;EAAEC,UAAU;EAAEM;AAAe,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}