{"ast":null,"code":"import _objectSpread from\"/Users/viveksingh/Desktop/book-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Lightweight API helper for the frontend to talk to the local Express API.\nconst API_BASE=process.env.REACT_APP_API_URL||'http://localhost:4000';async function request(path){let opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};// include Authorization Bearer token from localStorage when present\nconst headers=_objectSpread({'Content-Type':'application/json'},opts.headers||{});try{let tokenRaw=localStorage.getItem('pt_admin_token');if(tokenRaw){try{tokenRaw=JSON.parse(tokenRaw);}catch(e){/* keep raw if not JSON */}if(tokenRaw)headers['Authorization']=\"Bearer \".concat(tokenRaw);}}catch(e){}const res=await fetch(\"\".concat(API_BASE).concat(path),_objectSpread({headers},opts));if(!res.ok){const text=await res.text().catch(()=>null);throw new Error(text||res.statusText||'API error');}// Try to parse JSON, otherwise return null\nconst ct=res.headers.get('content-type')||'';if(ct.includes('application/json'))return res.json();return null;}export async function fetchBooks(){return request('/api/books');}export async function fetchAuthor(){return request('/api/author');}export async function saveAuthor(data){return request('/api/author',{method:'POST',body:JSON.stringify(data)});}export async function toggleFeatured(bookId){return request(\"/api/books/\".concat(bookId,\"/toggle-featured\"),{method:'POST'});}export async function adminLogin(username,password){return request('/api/admin/login',{method:'POST',body:JSON.stringify({username,password})});}export async function createOrder(payload){return request('/api/orders',{method:'POST',body:JSON.stringify(payload)});}export async function fetchOrders(){return request('/api/orders');}export async function updateOrderStatus(id,status){return request(\"/api/orders/\".concat(id,\"/status\"),{method:'PUT',body:JSON.stringify({status})});}export async function deleteOrder(id){return request(\"/api/orders/\".concat(id),{method:'DELETE'});}export async function fetchOrderQueue(){return request('/api/orders/queue');}export async function flushOrderQueue(){return request('/api/orders/queue/flush',{method:'POST'});}// Books\nexport async function createBook(payload){return request('/api/books',{method:'POST',body:JSON.stringify(payload)});}export async function updateBook(id,payload){return request(\"/api/books/\".concat(id),{method:'PUT',body:JSON.stringify(payload)});}export async function deleteBook(id){return request(\"/api/books/\".concat(id),{method:'DELETE'});}// Blogs\nexport async function fetchBlogs(){return request('/api/blogs');}export async function fetchBlog(id){return request(\"/api/blogs/\".concat(id));}export async function createBlog(payload){return request('/api/blogs',{method:'POST',body:JSON.stringify(payload)});}export async function updateBlog(id,payload){return request(\"/api/blogs/\".concat(id),{method:'PUT',body:JSON.stringify(payload)});}export async function deleteBlog(id){return request(\"/api/blogs/\".concat(id),{method:'DELETE'});}export default{fetchBooks,fetchAuthor,saveAuthor,toggleFeatured,adminLogin,createOrder,fetchOrders,updateOrderStatus,deleteOrder,fetchOrderQueue,flushOrderQueue,fetchBlogs,fetchBlog,createBlog,updateBlog,deleteBlog};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","request","path","opts","arguments","length","undefined","headers","_objectSpread","tokenRaw","localStorage","getItem","JSON","parse","e","concat","res","fetch","ok","text","catch","Error","statusText","ct","get","includes","json","fetchBooks","fetchAuthor","saveAuthor","data","method","body","stringify","toggleFeatured","bookId","adminLogin","username","password","createOrder","payload","fetchOrders","updateOrderStatus","id","status","deleteOrder","fetchOrderQueue","flushOrderQueue","createBook","updateBook","deleteBook","fetchBlogs","fetchBlog","createBlog","updateBlog","deleteBlog"],"sources":["/Users/viveksingh/Desktop/book-frontend/src/lib/api.js"],"sourcesContent":["// Lightweight API helper for the frontend to talk to the local Express API.\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n\nasync function request(path, opts = {}){\n  // include Authorization Bearer token from localStorage when present\n  const headers = { 'Content-Type': 'application/json', ...(opts.headers || {}) };\n  try{\n    let tokenRaw = localStorage.getItem('pt_admin_token');\n    if(tokenRaw){\n      try{ tokenRaw = JSON.parse(tokenRaw); }catch(e){ /* keep raw if not JSON */ }\n      if(tokenRaw) headers['Authorization'] = `Bearer ${tokenRaw}`;\n    }\n  }catch(e){}\n\n  const res = await fetch(`${API_BASE}${path}`, {\n    headers,\n    ...opts\n  });\n  if(!res.ok){\n    const text = await res.text().catch(()=>null);\n    throw new Error(text || res.statusText || 'API error');\n  }\n  // Try to parse JSON, otherwise return null\n  const ct = res.headers.get('content-type') || '';\n  if(ct.includes('application/json')) return res.json();\n  return null;\n}\n\nexport async function fetchBooks(){ return request('/api/books'); }\nexport async function fetchAuthor(){ return request('/api/author'); }\nexport async function saveAuthor(data){ return request('/api/author', { method: 'POST', body: JSON.stringify(data) }); }\nexport async function toggleFeatured(bookId){ return request(`/api/books/${bookId}/toggle-featured`, { method: 'POST' }); }\nexport async function adminLogin(username, password){\n  return request('/api/admin/login', { method: 'POST', body: JSON.stringify({ username, password }) });\n}\nexport async function createOrder(payload){ return request('/api/orders', { method: 'POST', body: JSON.stringify(payload) }); }\nexport async function fetchOrders(){ return request('/api/orders'); }\nexport async function updateOrderStatus(id, status){ return request(`/api/orders/${id}/status`, { method: 'PUT', body: JSON.stringify({ status }) }); }\nexport async function deleteOrder(id){ return request(`/api/orders/${id}`, { method: 'DELETE' }); }\nexport async function fetchOrderQueue(){ return request('/api/orders/queue'); }\nexport async function flushOrderQueue(){ return request('/api/orders/queue/flush', { method: 'POST' }); }\n// Books\nexport async function createBook(payload){ return request('/api/books', { method: 'POST', body: JSON.stringify(payload) }); }\nexport async function updateBook(id, payload){ return request(`/api/books/${id}`, { method: 'PUT', body: JSON.stringify(payload) }); }\nexport async function deleteBook(id){ return request(`/api/books/${id}`, { method: 'DELETE' }); }\n// Blogs\nexport async function fetchBlogs(){ return request('/api/blogs'); }\nexport async function fetchBlog(id){ return request(`/api/blogs/${id}`); }\nexport async function createBlog(payload){ return request('/api/blogs', { method: 'POST', body: JSON.stringify(payload) }); }\nexport async function updateBlog(id, payload){ return request(`/api/blogs/${id}`, { method: 'PUT', body: JSON.stringify(payload) }); }\nexport async function deleteBlog(id){ return request(`/api/blogs/${id}`, { method: 'DELETE' }); }\n\nexport default { fetchBooks, fetchAuthor, saveAuthor, toggleFeatured, adminLogin, createOrder, fetchOrders, updateOrderStatus, deleteOrder, fetchOrderQueue, flushOrderQueue, fetchBlogs, fetchBlog, createBlog, updateBlog, deleteBlog };\n"],"mappings":"4HAAA;AACA,KAAM,CAAAA,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,CAEzE,cAAe,CAAAC,OAAOA,CAACC,IAAI,CAAY,IAAV,CAAAC,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CACpC;AACA,KAAM,CAAAG,OAAO,CAAAC,aAAA,EAAK,cAAc,CAAE,kBAAkB,EAAML,IAAI,CAACI,OAAO,EAAI,CAAC,CAAC,CAAG,CAC/E,GAAG,CACD,GAAI,CAAAE,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,CACrD,GAAGF,QAAQ,CAAC,CACV,GAAG,CAAEA,QAAQ,CAAGG,IAAI,CAACC,KAAK,CAACJ,QAAQ,CAAC,CAAE,CAAC,MAAMK,CAAC,CAAC,CAAE,2BACjD,GAAGL,QAAQ,CAAEF,OAAO,CAAC,eAAe,CAAC,WAAAQ,MAAA,CAAaN,QAAQ,CAAE,CAC9D,CACF,CAAC,MAAMK,CAAC,CAAC,CAAC,CAEV,KAAM,CAAAE,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAF,MAAA,CAAIlB,QAAQ,EAAAkB,MAAA,CAAGb,IAAI,EAAAM,aAAA,EACxCD,OAAO,EACJJ,IAAI,CACR,CAAC,CACF,GAAG,CAACa,GAAG,CAACE,EAAE,CAAC,CACT,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAH,GAAG,CAACG,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,IAAI,CAAC,CAC7C,KAAM,IAAI,CAAAC,KAAK,CAACF,IAAI,EAAIH,GAAG,CAACM,UAAU,EAAI,WAAW,CAAC,CACxD,CACA;AACA,KAAM,CAAAC,EAAE,CAAGP,GAAG,CAACT,OAAO,CAACiB,GAAG,CAAC,cAAc,CAAC,EAAI,EAAE,CAChD,GAAGD,EAAE,CAACE,QAAQ,CAAC,kBAAkB,CAAC,CAAE,MAAO,CAAAT,GAAG,CAACU,IAAI,CAAC,CAAC,CACrD,MAAO,KAAI,CACb,CAEA,MAAO,eAAe,CAAAC,UAAUA,CAAA,CAAE,CAAE,MAAO,CAAA1B,OAAO,CAAC,YAAY,CAAC,CAAE,CAClE,MAAO,eAAe,CAAA2B,WAAWA,CAAA,CAAE,CAAE,MAAO,CAAA3B,OAAO,CAAC,aAAa,CAAC,CAAE,CACpE,MAAO,eAAe,CAAA4B,UAAUA,CAACC,IAAI,CAAC,CAAE,MAAO,CAAA7B,OAAO,CAAC,aAAa,CAAE,CAAE8B,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEpB,IAAI,CAACqB,SAAS,CAACH,IAAI,CAAE,CAAC,CAAC,CAAE,CACvH,MAAO,eAAe,CAAAI,cAAcA,CAACC,MAAM,CAAC,CAAE,MAAO,CAAAlC,OAAO,eAAAc,MAAA,CAAeoB,MAAM,qBAAoB,CAAEJ,MAAM,CAAE,MAAO,CAAC,CAAC,CAAE,CAC1H,MAAO,eAAe,CAAAK,UAAUA,CAACC,QAAQ,CAAEC,QAAQ,CAAC,CAClD,MAAO,CAAArC,OAAO,CAAC,kBAAkB,CAAE,CAAE8B,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEpB,IAAI,CAACqB,SAAS,CAAC,CAAEI,QAAQ,CAAEC,QAAS,CAAC,CAAE,CAAC,CAAC,CACtG,CACA,MAAO,eAAe,CAAAC,WAAWA,CAACC,OAAO,CAAC,CAAE,MAAO,CAAAvC,OAAO,CAAC,aAAa,CAAE,CAAE8B,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEpB,IAAI,CAACqB,SAAS,CAACO,OAAO,CAAE,CAAC,CAAC,CAAE,CAC9H,MAAO,eAAe,CAAAC,WAAWA,CAAA,CAAE,CAAE,MAAO,CAAAxC,OAAO,CAAC,aAAa,CAAC,CAAE,CACpE,MAAO,eAAe,CAAAyC,iBAAiBA,CAACC,EAAE,CAAEC,MAAM,CAAC,CAAE,MAAO,CAAA3C,OAAO,gBAAAc,MAAA,CAAgB4B,EAAE,YAAW,CAAEZ,MAAM,CAAE,KAAK,CAAEC,IAAI,CAAEpB,IAAI,CAACqB,SAAS,CAAC,CAAEW,MAAO,CAAC,CAAE,CAAC,CAAC,CAAE,CACtJ,MAAO,eAAe,CAAAC,WAAWA,CAACF,EAAE,CAAC,CAAE,MAAO,CAAA1C,OAAO,gBAAAc,MAAA,CAAgB4B,EAAE,EAAI,CAAEZ,MAAM,CAAE,QAAS,CAAC,CAAC,CAAE,CAClG,MAAO,eAAe,CAAAe,eAAeA,CAAA,CAAE,CAAE,MAAO,CAAA7C,OAAO,CAAC,mBAAmB,CAAC,CAAE,CAC9E,MAAO,eAAe,CAAA8C,eAAeA,CAAA,CAAE,CAAE,MAAO,CAAA9C,OAAO,CAAC,yBAAyB,CAAE,CAAE8B,MAAM,CAAE,MAAO,CAAC,CAAC,CAAE,CACxG;AACA,MAAO,eAAe,CAAAiB,UAAUA,CAACR,OAAO,CAAC,CAAE,MAAO,CAAAvC,OAAO,CAAC,YAAY,CAAE,CAAE8B,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEpB,IAAI,CAACqB,SAAS,CAACO,OAAO,CAAE,CAAC,CAAC,CAAE,CAC5H,MAAO,eAAe,CAAAS,UAAUA,CAACN,EAAE,CAAEH,OAAO,CAAC,CAAE,MAAO,CAAAvC,OAAO,eAAAc,MAAA,CAAe4B,EAAE,EAAI,CAAEZ,MAAM,CAAE,KAAK,CAAEC,IAAI,CAAEpB,IAAI,CAACqB,SAAS,CAACO,OAAO,CAAE,CAAC,CAAC,CAAE,CACrI,MAAO,eAAe,CAAAU,UAAUA,CAACP,EAAE,CAAC,CAAE,MAAO,CAAA1C,OAAO,eAAAc,MAAA,CAAe4B,EAAE,EAAI,CAAEZ,MAAM,CAAE,QAAS,CAAC,CAAC,CAAE,CAChG;AACA,MAAO,eAAe,CAAAoB,UAAUA,CAAA,CAAE,CAAE,MAAO,CAAAlD,OAAO,CAAC,YAAY,CAAC,CAAE,CAClE,MAAO,eAAe,CAAAmD,SAASA,CAACT,EAAE,CAAC,CAAE,MAAO,CAAA1C,OAAO,eAAAc,MAAA,CAAe4B,EAAE,CAAE,CAAC,CAAE,CACzE,MAAO,eAAe,CAAAU,UAAUA,CAACb,OAAO,CAAC,CAAE,MAAO,CAAAvC,OAAO,CAAC,YAAY,CAAE,CAAE8B,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEpB,IAAI,CAACqB,SAAS,CAACO,OAAO,CAAE,CAAC,CAAC,CAAE,CAC5H,MAAO,eAAe,CAAAc,UAAUA,CAACX,EAAE,CAAEH,OAAO,CAAC,CAAE,MAAO,CAAAvC,OAAO,eAAAc,MAAA,CAAe4B,EAAE,EAAI,CAAEZ,MAAM,CAAE,KAAK,CAAEC,IAAI,CAAEpB,IAAI,CAACqB,SAAS,CAACO,OAAO,CAAE,CAAC,CAAC,CAAE,CACrI,MAAO,eAAe,CAAAe,UAAUA,CAACZ,EAAE,CAAC,CAAE,MAAO,CAAA1C,OAAO,eAAAc,MAAA,CAAe4B,EAAE,EAAI,CAAEZ,MAAM,CAAE,QAAS,CAAC,CAAC,CAAE,CAEhG,cAAe,CAAEJ,UAAU,CAAEC,WAAW,CAAEC,UAAU,CAAEK,cAAc,CAAEE,UAAU,CAAEG,WAAW,CAAEE,WAAW,CAAEC,iBAAiB,CAAEG,WAAW,CAAEC,eAAe,CAAEC,eAAe,CAAEI,UAAU,CAAEC,SAAS,CAAEC,UAAU,CAAEC,UAAU,CAAEC,UAAW,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}