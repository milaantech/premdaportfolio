{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,Link}from'react-router-dom';import api from'../lib/api';import ReactMarkdown from'react-markdown';import remarkGfm from'remark-gfm';import ShareButtons from'./ShareButtons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BlogPage(){const{id}=useParams();const[blog,setBlog]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{let mounted=true;async function load(){setLoading(true);try{const b=await api.fetchBlog(id);if(mounted)setBlog(b);}catch(err){if(mounted)setError(err.message||String(err));}if(mounted)setLoading(false);}load();return()=>mounted=false;},[id]);if(loading)return/*#__PURE__*/_jsx(\"main\",{className:\"max-w-4xl mx-auto px-6 py-12 animate-pulse text-center text-lg\",children:\"Loading...\"});if(error)return/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-4xl mx-auto px-6 py-12 text-red-500 font-semibold\",children:[\"Error: \",String(error)]});if(!blog)return/*#__PURE__*/_jsx(\"main\",{className:\"max-w-4xl mx-auto px-6 py-12\",children:\"Post not found\"});const isHtml=function(){let s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return /<\\/?[a-z][\\s\\S]*>/i.test(s||'');};const date=blog.publishedAt?new Date(blog.publishedAt).toLocaleDateString():null;return/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10\",children:[/*#__PURE__*/_jsxs(\"article\",{className:\"bg-white dark:bg-slate-900 rounded-3xl shadow-xl overflow-hidden border border-slate-200 dark:border-slate-700\",children:[blog.image&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full h-64 sm:h-80 md:h-[420px]\",children:[/*#__PURE__*/_jsx(\"img\",{src:blog.image,alt:blog.title,className:\"w-full h-full object-cover\",onError:e=>{e.target.onerror=null;e.target.src='https://placehold.co/1200x600?text=Blog';}}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute left-4 sm:left-8 bottom-6 text-white drop-shadow-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs sm:text-sm opacity-90\",children:date}),/*#__PURE__*/_jsx(\"h1\",{className:\"mt-1 font-bold leading-tight text-2xl sm:text-4xl md:text-5xl font-serif\",children:blog.title})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 sm:p-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-lg max-w-none text-slate-700 dark:prose-invert dark:text-slate-300\",children:isHtml(blog.content)?/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:blog.content}}):/*#__PURE__*/_jsx(ReactMarkdown,{remarkPlugins:[remarkGfm],children:blog.content||blog.excerpt||''})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10 flex flex-wrap items-center justify-between gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:Array.isArray(blog.tags)&&blog.tags.map((t,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-3 py-1 bg-slate-100 dark:bg-slate-700 rounded-full font-medium\",children:t},i))}),/*#__PURE__*/_jsx(ShareButtons,{url:window.location.href,title:blog.title})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 text-left\",children:/*#__PURE__*/_jsx(Link,{to:\"/blogs\",className:\"text-amber-600 hover:underline text-sm sm:text-base font-semibold tracking-wide\",children:\"\\u2190 Back to Blog\"})})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","api","ReactMarkdown","remarkGfm","ShareButtons","jsx","_jsx","jsxs","_jsxs","BlogPage","id","blog","setBlog","loading","setLoading","error","setError","mounted","load","b","fetchBlog","err","message","String","className","children","isHtml","s","arguments","length","undefined","test","date","publishedAt","Date","toLocaleDateString","image","src","alt","title","onError","e","target","onerror","content","dangerouslySetInnerHTML","__html","remarkPlugins","excerpt","Array","isArray","tags","map","t","i","url","window","location","href","to"],"sources":["/Users/viveksingh/Desktop/book-frontend/src/components/BlogPage.js"],"sourcesContent":["\nimport React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport api from '../lib/api';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport ShareButtons from './ShareButtons';\n\nexport default function BlogPage(){\n  const { id } = useParams();\n  const [blog, setBlog] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(()=>{\n    let mounted = true;\n    async function load(){\n      setLoading(true);\n      try{\n        const b = await api.fetchBlog(id);\n        if(mounted) setBlog(b);\n      }catch(err){ if(mounted) setError(err.message || String(err)); }\n      if(mounted) setLoading(false);\n    }\n    load();\n    return ()=> mounted = false;\n  }, [id]);\n\n  if(loading) return <main className=\"max-w-4xl mx-auto px-6 py-12 animate-pulse text-center text-lg\">Loading...</main>;\n  if(error) return <main className=\"max-w-4xl mx-auto px-6 py-12 text-red-500 font-semibold\">Error: {String(error)}</main>;\n  if(!blog) return <main className=\"max-w-4xl mx-auto px-6 py-12\">Post not found</main>;\n\n  const isHtml = (s='') => /<\\/?[a-z][\\s\\S]*>/i.test(s || '');\n  const date = blog.publishedAt ? new Date(blog.publishedAt).toLocaleDateString() : null;\n\n  return (\n    <main className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10\">\n      <article className=\"bg-white dark:bg-slate-900 rounded-3xl shadow-xl overflow-hidden border border-slate-200 dark:border-slate-700\">\n        {blog.image && (\n          <div className=\"relative w-full h-64 sm:h-80 md:h-[420px]\">\n            <img\n              src={blog.image}\n              alt={blog.title}\n              className=\"w-full h-full object-cover\"\n              onError={(e)=>{e.target.onerror=null;e.target.src='https://placehold.co/1200x600?text=Blog'}}\n            />\n            <div className=\"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent\" />\n            <div className=\"absolute left-4 sm:left-8 bottom-6 text-white drop-shadow-lg\">\n              <div className=\"text-xs sm:text-sm opacity-90\">{date}</div>\n              <h1 className=\"mt-1 font-bold leading-tight text-2xl sm:text-4xl md:text-5xl font-serif\">{blog.title}</h1>\n            </div>\n          </div>\n        )}\n\n        <div className=\"p-6 sm:p-10\">\n          <div className=\"prose prose-lg max-w-none text-slate-700 dark:prose-invert dark:text-slate-300\">\n            {isHtml(blog.content) ? (\n              <div dangerouslySetInnerHTML={{ __html: blog.content }} />\n            ) : (\n              <ReactMarkdown remarkPlugins={[remarkGfm]}>\n                {blog.content || blog.excerpt || ''}\n              </ReactMarkdown>\n            )}\n          </div>\n\n          <div className=\"mt-10 flex flex-wrap items-center justify-between gap-6\">\n            <div className=\"flex flex-wrap gap-2\">\n              {Array.isArray(blog.tags) && blog.tags.map((t, i) => (\n                <span\n                  key={i}\n                  className=\"text-xs px-3 py-1 bg-slate-100 dark:bg-slate-700 rounded-full font-medium\"\n                >{t}</span>\n              ))}\n            </div>\n            <ShareButtons url={window.location.href} title={blog.title} />\n          </div>\n        </div>\n      </article>\n\n      <div className=\"mt-8 text-left\">\n        <Link\n          to=\"/blogs\"\n          className=\"text-amber-600 hover:underline text-sm sm:text-base font-semibold tracking-wide\"\n        >\n          ‚Üê Back to Blog\n        </Link>\n      </div>\n    </main>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}