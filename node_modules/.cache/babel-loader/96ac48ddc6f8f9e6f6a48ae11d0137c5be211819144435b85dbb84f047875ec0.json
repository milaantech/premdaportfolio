{"ast":null,"code":"// Lightweight API helper for the frontend to talk to the local Express API.\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:4000';\nasync function request(path, opts = {}) {\n  const res = await fetch(`${API_BASE}${path}`, {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    ...opts\n  });\n  if (!res.ok) {\n    const text = await res.text().catch(() => null);\n    throw new Error(text || res.statusText || 'API error');\n  }\n  // Try to parse JSON, otherwise return null\n  const ct = res.headers.get('content-type') || '';\n  if (ct.includes('application/json')) return res.json();\n  return null;\n}\nexport async function fetchBooks() {\n  return request('/api/books');\n}\nexport async function fetchAuthor() {\n  return request('/api/author');\n}\nexport async function saveAuthor(data) {\n  return request('/api/author', {\n    method: 'POST',\n    body: JSON.stringify(data)\n  });\n}\nexport async function toggleFeatured(bookId) {\n  return request(`/api/books/${bookId}/toggle-featured`, {\n    method: 'POST'\n  });\n}\nexport default {\n  fetchBooks,\n  fetchAuthor,\n  saveAuthor,\n  toggleFeatured\n};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","request","path","opts","res","fetch","headers","ok","text","catch","Error","statusText","ct","get","includes","json","fetchBooks","fetchAuthor","saveAuthor","data","method","body","JSON","stringify","toggleFeatured","bookId"],"sources":["/Users/viveksingh/Desktop/book-frontend/src/lib/api.js"],"sourcesContent":["// Lightweight API helper for the frontend to talk to the local Express API.\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n\nasync function request(path, opts = {}){\n  const res = await fetch(`${API_BASE}${path}`, {\n    headers: { 'Content-Type': 'application/json' },\n    ...opts\n  });\n  if(!res.ok){\n    const text = await res.text().catch(()=>null);\n    throw new Error(text || res.statusText || 'API error');\n  }\n  // Try to parse JSON, otherwise return null\n  const ct = res.headers.get('content-type') || '';\n  if(ct.includes('application/json')) return res.json();\n  return null;\n}\n\nexport async function fetchBooks(){ return request('/api/books'); }\nexport async function fetchAuthor(){ return request('/api/author'); }\nexport async function saveAuthor(data){ return request('/api/author', { method: 'POST', body: JSON.stringify(data) }); }\nexport async function toggleFeatured(bookId){ return request(`/api/books/${bookId}/toggle-featured`, { method: 'POST' }); }\n\nexport default { fetchBooks, fetchAuthor, saveAuthor, toggleFeatured };\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAEzE,eAAeC,OAAOA,CAACC,IAAI,EAAEC,IAAI,GAAG,CAAC,CAAC,EAAC;EACrC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,QAAQ,GAAGK,IAAI,EAAE,EAAE;IAC5CI,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/C,GAAGH;EACL,CAAC,CAAC;EACF,IAAG,CAACC,GAAG,CAACG,EAAE,EAAC;IACT,MAAMC,IAAI,GAAG,MAAMJ,GAAG,CAACI,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAI,IAAI,CAAC;IAC7C,MAAM,IAAIC,KAAK,CAACF,IAAI,IAAIJ,GAAG,CAACO,UAAU,IAAI,WAAW,CAAC;EACxD;EACA;EACA,MAAMC,EAAE,GAAGR,GAAG,CAACE,OAAO,CAACO,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE;EAChD,IAAGD,EAAE,CAACE,QAAQ,CAAC,kBAAkB,CAAC,EAAE,OAAOV,GAAG,CAACW,IAAI,CAAC,CAAC;EACrD,OAAO,IAAI;AACb;AAEA,OAAO,eAAeC,UAAUA,CAAA,EAAE;EAAE,OAAOf,OAAO,CAAC,YAAY,CAAC;AAAE;AAClE,OAAO,eAAegB,WAAWA,CAAA,EAAE;EAAE,OAAOhB,OAAO,CAAC,aAAa,CAAC;AAAE;AACpE,OAAO,eAAeiB,UAAUA,CAACC,IAAI,EAAC;EAAE,OAAOlB,OAAO,CAAC,aAAa,EAAE;IAAEmB,MAAM,EAAE,MAAM;IAAEC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI;EAAE,CAAC,CAAC;AAAE;AACvH,OAAO,eAAeK,cAAcA,CAACC,MAAM,EAAC;EAAE,OAAOxB,OAAO,CAAC,cAAcwB,MAAM,kBAAkB,EAAE;IAAEL,MAAM,EAAE;EAAO,CAAC,CAAC;AAAE;AAE1H,eAAe;EAAEJ,UAAU;EAAEC,WAAW;EAAEC,UAAU;EAAEM;AAAe,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}